{
  "workingObject": {
    "Botname": "Jenny the Bot",
    "SystemPrompt": "You are a helpful assistant.",
    "Persona": "Default AI Assistant",
    "Instructions": "Answer concisely.",
    "Model": "gpt-4o-mini",
    "Endpoint": "https://api.openai.com/v1/chat/completions",
    "APIKey": "<OPENAI_API_KEY>",
    "Response": "",
    "EndpointResponses": "https://api.openai.com/v1/responses",
    "useAIModule": "completions",
    "payload": "",
    "timezone": "Europe/Berlin",
    "Temperature": 0.2,
    "MaxTokens": 2000,
    "BaseURL": "https://<YOUR_DOMAIN>",
    "AllowArtifactGeneration": true,
    "RequestTimeoutMs": 1000000,
    "ToolChoice": "auto",
    "Tools": [
      "getGoogle",
      "getWebpage",
      "getAnimatedPicture",
      "getConfluence",
      "getYoutube",
      "getImage",
      "getImageDescription",
      "getHistory",
      "getText",
      "getInformation",
      "getJira",
      "getLocation",
      "getPDF",
      "getTime",
      "getTimeline",
      "getToken",
      "getVideoFromText"
    ],
    "IncludeHistory": true,
    "IncludeHistoryTools": false,
    "IncludeRuntimeContext": true,
    "getDetailedContext": true,
    "MaxLoops": 15,
    "MaxToolCalls": 4,
    "contextTokenBudget": 60000,
    "GDPRDisclaimer": "GDPR Notice & Consent (Private Operator – Germany)\\n\\nApplicability & Framework\\n- This bot is operated privately (non-commercial) in Germany. ...\\n\\nEffective date: 2025-10-25",
    "AvatarApiKey": "<OPENAI_API_KEY>",
    "AvatarEndpoint": "https://api.openai.com/v1/images/generations",
    "AvatarModel": "dall-e-3",
    "AvatarSize": "1024x1024",
    "AvatarPrompt": "",
    "ModAdmin": "<YOUR_DISCORD_USER_ID>",
    "ModSilence": "[silence]",
    "discord-admin": {
      "slash": {
        "silent": true,
        "ephemeral": false,
        "definitions": [
          {
            "name": "avatar",
            "description": "Set or generate the bot's channel avatar",
            "dm_permission": false,
            "options": [
              {
                "type": 1,
                "name": "url",
                "Admin": ["<YOUR_DISCORD_USER_ID>"],
                "description": "Download image from a URL and set as avatar",
                "options": [
                  { "type": 3, "name": "url", "description": "Direct image URL", "required": true }
                ]
              },
              {
                "type": 1,
                "name": "prompt",
                "description": "Append text to the avatar prompt and regenerate",
                "Admin": ["<YOUR_DISCORD_USER_ID>"],
                "options": [
                  { "type": 3, "name": "text", "description": "Prompt text to append", "required": true }
                ]
              },
              {
                "type": 1,
                "name": "regen",
                "Admin": ["<YOUR_DISCORD_USER_ID>"],
                "description": "Regenerate avatar using current prompt"
              }
            ]
          },
          {
            "name": "purge",
            "description": "Delete recent messages (hybrid)",
            "dm_permission": false,
            "Admin": ["<YOUR_DISCORD_USER_ID>"],
            "options": [
              { "type": 4, "name": "count", "description": "How many (max 5000)", "required": false }
            ]
          },
          { "name": "purgedb", "description": "Delete the database entries for this channel", "dm_permission": false, "Admin": ["<YOUR_DISCORD_USER_ID>"] },
          { "name": "freeze", "description": "Mark DB rows for this channel as frozen", "dm_permission": false, "Admin": ["<YOUR_DISCORD_USER_ID>"] },
          {
            "name": "gdpr",
            "description": "Set GDPR consent flags",
            "dm_permission": false,
            "options": [
              {
                "type": 1,
                "name": "text",
                "description": "Enable/disable text chat consent",
                "options": [{ "type": 4, "name": "value", "description": "0 or 1", "required": true }]
              },
              {
                "type": 1,
                "name": "voice",
                "description": "Enable/disable voice consent",
                "options": [{ "type": 4, "name": "value", "description": "0 or 1", "required": true }]
              }
            ]
          },
          { "name": "join", "description": "Join my current voice channel", "dm_permission": false },
          { "name": "error", "description": "Simulate an internal error for testing", "dm_permission": false },
          { "name": "leave", "description": "Leave the current voice channel", "dm_permission": false }
        ]
      }
    },
    "ShowReactions": true,
    "fileURLs": [],
    "logging": [],
    "contextSize": 20,
    "trigger": "jenny",
    "db": {
      "host": "localhost",
      "user": "discord_bot",
      "password": "<DB_PASSWORD>",
      "database": "discord_ai"
    },
    "useVoiceChannel": 0,
    "TTSModel": "gpt-4o-mini-tts",
    "TTSVoice": "nova",
    "TTSEndpoint": "https://api.openai.com/v1/audio/speech",
    "TTSAPIKey": "<OPENAI_API_KEY>",
    "whisperApiKey": "<OPENAI_API_KEY>",
    "whisperModel": "whisper-1",
    "whisperLanguage": "",
    "whisperEndpoint": "https://api.openai.com",
    "toolsconfig": {
      "getImage": {
        "apiKey": "<OPENAI_API_KEY>",
        "endpoint": "https://api.openai.com/v1/images/generations",
        "model": "dall-e-3",
        "size": "1024x1024",
        "n": 1,
        "public_base_url": "https://<YOUR_DOMAIN>/",
        "targetLongEdge": 1152,
        "aspect": "",
        "enhancerEndpoint": "https://api.openai.com/v1/chat/completions",
        "enhancerApiKey": "<OPENAI_API_KEY>",
        "enhancerModel": "gpt-4o-mini",
        "enhancerTemperature": 0.2,
        "enhancerMaxTokens": 350,
        "enhancerTimeoutMs": 60000
      },
      "getConfluence": {
        "baseUrl": "https://<YOUR_ATLASSIAN_SUBDOMAIN>.atlassian.net/wiki",
        "email": "<YOUR_EMAIL>",
        "token": "<ATLASSIAN_API_TOKEN>",
        "project": "ST",
        "mainPageId": "<CONFLUENCE_PAGE_ID>",
        "useV2": true
      },
      "getPDF": {
        "publicBaseUrl": "https://<YOUR_DOMAIN>",
        "headless": "new",
        "chromeArgs": ["--no-sandbox"],
        "waitUntil": "networkidle0",
        "timeoutMs": 120000,
        "format": "A4",
        "printBackground": true
      },
      "getText": {
        "publicBaseUrl": "https://<YOUR_DOMAIN>"
      },
      "getAnimatedPicture": {
        "videoApiToken": "<REPLICATE_API_TOKEN>",
        "videoBaseUrl": "https://api.replicate.com/v1",
        "videoModel": "google/veo-3",
        "videoPollIntervalMs": 5000,
        "videoTimeoutMs": 600000,
        "videoPublicBaseUrl": "https://<YOUR_DOMAIN>"
      },
      "getVideoFromText": {
        "videoApiToken": "<REPLICATE_API_TOKEN>",
        "videoBaseUrl": "https://api.replicate.com/v1",
        "videoModel": "google/veo-3",
        "videoPollIntervalMs": 5000,
        "videoTimeoutMs": 600000,
        "videoPublicBaseUrl": "https://<YOUR_DOMAIN>"
      },
      "getJira": {
        "baseUrl": "https://<YOUR_ATLASSIAN_SUBDOMAIN>.atlassian.net",
        "email": "<YOUR_EMAIL>",
        "token": "<ATLASSIAN_API_TOKEN>",
        "projectKey": "ST",
        "defaultIssueType": "Task",
        "defaultAssignee": "",
        "defaultPriority": "Medium",
        "timeoutMs": 60000,
        "defaults": {
          "fields": {
            "summary": "",
            "description": "",
            "priority": { "name": "Medium" }
          }
        },
        "customFields": {
          "epicLink": "customfield_10014",
          "storyPoints": "customfield_10016"
        },
        "search": { "maxResults": 50 },
        "transitions": { "open": "", "inProgress": "", "done": "" }
      },
      "getToken": {
        "public_base_url": "https://<YOUR_DOMAIN>",
        "magickPath": "convert",
        "size": 512,
        "border_px": 10,
        "ffmpegPath": "ffmpeg",
        "maxMb": 4,
        "fpsList": [12, 10, 8],
        "scaleList": [512, 384, 320],
        "maxColorsList": [128, 96, 64, 48, 32],
        "ditherList": [
          "bayer:bayer_scale=3:diff_mode=rectangle",
          "bayer:bayer_scale=5:diff_mode=rectangle",
          "none"
        ],
        "useGifsicleLossy": true,
        "gifsiclePath": "gifsicle",
        "gifsicleLossyLevels": [80, 100, 120]
      },
      "getImageDescription": {
        "apiKey": "<OPENAI_API_KEY>",
        "model": "gpt-4o-mini",
        "endpoint": "https://api.openai.com/v1/chat/completions",
        "temperature": 0.2,
        "max_tokens": 1000,
        "timeout_ms": 60000
      },
      "getHistory": {
        "pagesize": 1000,
        "max_rows": 5000,
        "threshold": 2000,
        "model": "gpt-4.1",
        "temperature": 0,
        "max_tokens": 8000,
        "aiTimeoutMs": 45000,
        "endpoint": "https://api.openai.com/v1/chat/completions",
        "apiKey": "<OPENAI_API_KEY>"
      },
      "getInformation": {
        "cluster_rows": 200,
        "pad_rows": 20,
        "token_window": 5,
        "max_log_chars": 6000,
        "max_output_lines": 1000,
        "min_coverage": 1,
        "event_gap_minutes": 45,
        "max_timeline_periods": 30,
        "strip_code": false
      },
      "getGoogle": {
        "apiKey": "<GOOGLE_API_KEY>",
        "cseId": "<GOOGLE_CSE_ID>",
        "num": 10,
        "safe": "off",
        "hl": "de",
        "lr": "lang_de",
        "cr": "countryDE",
        "gl": "de",
        "timeoutMs": 20000
      },
      "getWebpage": {
        "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/124.0.0.0 Safari/537.36",
        "timeoutMs": 30000,
        "maxInputChars": 240000,
        "model": "gpt-4.1",
        "temperature": 0.2,
        "max_tokens": 18000,
        "aiTimeoutMs": 45000,
        "endpoint": "https://api.openai.com/v1/chat/completions",
        "apiKey": "<OPENAI_API_KEY>",
        "wordThreshold": 2000
      },
      "getImageSD": {
        "base_url": "http://127.0.0.1:7860",
        "public_base_url": "https://<YOUR_DOMAIN>",
        "size": "384x384",
        "n": 1,
        "steps": 10,
        "cfg_scale": 6.5,
        "sampler": "Euler a",
        "seed": -1,
        "model": "realisticVisionV60B1_v51HyperVAE.safetensors",
        "negative_extra": "overprocessed, muddy colors",
        "timeoutMs": 900000,
        "networkTimeoutMs": 7200000
      },
      "getLocation": {
        "googleApiKey": "<GOOGLE_API_KEY>",
        "publicBaseUrl": "https://<YOUR_DOMAIN>",
        "street_size": "800x600",
        "street_fov": 90,
        "timeoutMs": 20000
      },
      "getYoutube": {
        "googleApiKey": "<GOOGLE_API_KEY>",
        "endpoint": "https://api.openai.com/v1/chat/completions",
        "apiKey": "<OPENAI_API_KEY>",
        "model": "gpt-4.1",
        "temperature": 0.2,
        "max_tokens": 8000,
        "dump_threshold_chars": 20000,
        "transcriptLangs": ["de", "en"],
        "regionCode": "DE",
        "relevanceLanguage": "de",
        "searchMaxResults": 5,
        "aiTimeoutMs": 300000
      }
    }
  },
  "config": {
    "discord": {
      "flowName": "discord",
      "token": "<DISCORD_BOT_TOKEN>",
      "intents": ["Guilds", "GuildMessages", "MessageContent", "GuildVoiceStates", "GuildMembers", "DirectMessages"]
    },
    "context": {
      "endpoint": "https://api.openai.com/v1/chat/completions",
      "model": "gpt-4o-mini",
      "apiKey": "<OPENAI_API_KEY>",
      "periodSize": 600
    },
    "webpage": { "flowName": "webpage" },
    "discord-admin": { "flowName": "discord-admin" },
    "discord-status": {
      "flowName": "discord-status",
      "pollMs": 300,
      "status": "online",
      "mapping": {
        "getImage": "Summoning pixels …",
        "getImageSD": "Brewing diffusion potions …",
        "getImageDescription": "Staring at pixels thoughtfully …",
        "getAnimatedPicture": "Teaching pictures to wiggle …",
        "getVideoFromText": "Directing tiny actors …",
        "getTime": "Asking the space-time continuum …",
        "getToken": "Minting shiny tokens …",
        "getInformation": "Rummaging through the chat attic …",
        "getHistory": "Dusting off the archives …",
        "getGoogle": "Consulting the all-knowing oracle …",
        "getWebpage": "Skimming the page like a pro …",
        "getLocation": "Unfolding the maps …",
        "getTimeline": "Starting the Flux Capacitor …",
        "getPDF": "Scribbling the words …",
        "getJira": "Sorting the tasks …",
        "getConfluence": "Filling the chronicles …",
        "getText": "Writing the ancient letters …",
        "getYoutube": "Gazing in the abyss …"
      },
      "randomEnabled": true,
      "randomIntervalMs": 600000,
      "randomJitterPct": 0.25,
      "randomLines": [
        "Shall we play a game?",
        "Resistance is futile.",
        "End of line."
      ]
    },
    "discord-voice": { "flowName": "discord-voice" },
    "core-ai-completions": { "flow": ["discord", "discord-voice"] },
    "core-ai-responses": { "flow": ["discord", "discord-voice"] },
    "core-ai-pseudotoolcalls": { "flow": ["discord", "discord-voice"] },
    "discord-voice-tts": { "flow": ["discord-voice"] },
    "discord-voice-transcribe": {
      "flow": ["discord-voice"],
      "pollMs": 1000,
      "silenceMs": 1300,
      "maxCaptureMs": 25000,
      "minVoicedMs": 800,
      "snrDbThreshold": 3.5,
      "frameMs": 20,
      "startDebounceMs": 600
    },
    "core-output": { "flow": ["all"] },
    "moderation-output": { "flow": ["discord"] },
    "discord-text-output": { "flow": ["all"], "baseURL": "https://<YOUR_DOMAIN>" },
    "discord-add-context": { "flow": ["discord", "discord-voice"] },
    "discord-admin-commands": { "flow": ["discord-admin", "discord"] },
    "discord-channel-gate": { "flow": ["discord", "discord-voice", "discord-admin"] },
    "discord-trigger-gate": { "flow": ["discord", "discord-voice"] },
    "discord-reaction-start": { "flow": ["discord"] },
    "discord-reaction-finish": { "flow": ["discord"] },
    "discord-admin-join": { "flow": ["discord-admin"] },
    "discord-gdpr-gate": { "flow": ["discord", "discord-voice", "discord-admin"], "table": "gdpr" },
    "discord-admin-gdpr": { "flow": ["discord-admin"], "table": "gdpr" },
    "discord-admin-avatar": { "flow": ["discord-admin"] },
    "discord-channel-config": {
      "flow": ["discord", "discord-voice", "discord-admin"],
      "channels": {
        "<CHANNEL_ID_A>": [
          {
            "userIds": ["<YOUR_DISCORD_USER_ID>"],
            "flows": ["discord"],
            "overrides": {
              "Botname": "Jenny",
              "SystemPrompt": "Check getTimeline, getHistory for historical data. When asked check back with getInformation. Answer as complete as possible.",
              "Persona": "A funny Dungeons and Dragons expert",
              "Instructions": "You are Jenny, a Dungeon & Dragons expert specialized in the 5th Edition (5e).",
              "contextSize": 70,
              "trigger": ""
            }
          },
          {
            "userIds": ["<YOUR_DISCORD_USER_ID>"],
            "flows": ["discord-voice"],
            "overrides": {
              "Botname": "Jenny",
              "SystemPrompt": "Check getTimeline, getHistory for historical data. When asked check back with getInformation. Answer in one sentence. As short as possible.",
              "Persona": "A funny Dungeons and Dragons expert",
              "Instructions": "You are Jenny, a Dungeon & Dragons expert specialized in the 5th Edition (5e).",
              "contextSize": 70,
              "trigger": "Jenny"
            }
          }
        ],
        "<CHANNEL_ID_B>": [
          {
            "userIds": ["ALL"],
            "flows": ["discord"],
            "overrides": {
              "Botname": "Jenny",
              "SystemPrompt": "Check getTimeline, getHistory for historical data. Answer as complete as possible.",
              "Persona": "A funny Dungeons and Dragons expert",
              "Instructions": "You are Jenny, a D&D 5e expert.",
              "contextSize": 70,
              "trigger": ""
            }
          }
        ],
        "DM": [
          {
            "userIds": ["<YOUR_DISCORD_USER_ID>"],
            "overrides": {
              "Instructions": "Answer like a pissed dominatrix. (Example persona for DM only.)",
              "trigger": "",
              "ShowReactions": false
            }
          }
        ]
      }
    }
  }
}
